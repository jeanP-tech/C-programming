Dynamic Memory Allocation
---------------------

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char **argv) {
  int SizeOfArray;
  int *arr;

  printf("만들고 싶은 배열의 원소의 수 : ");
  scanf("%d", &SizeOfArray);

  arr = (int *)malloc(sizeof(int) * SizeOfArray);
  // int arr[SizeOfArray] 와 동일한 작업을 한 크기의 배열 생성

  free(arr);

  return 0;
}
```
- malloc 함수 : memory allocation의 약자
- <stdlib.h> 에 정의되어있음
- 인자로 전달된 크기의 바이트 수만큼 메모리 공간을 할당
- 배열의 원소 수를 SizeOfArray로 받아, int의 사이즈 수를 sizeof로 구해 곱해줌
- 이 함수가 리턴하는 것은 자신이 할당한 메모리의 시작 주소. 리턴형이 void* 형이므로 이를 int* 형으로 변환하여 arr에 넣어줌 

- free(arr) : 할당받은 메모리 영역을 다 쓰고 컴퓨터에 돌려줌
- free를 제대로 하지 않으면 memory leak이 발생함

Dynamic allocation of 2 Dimensional array
---------------------

```
/* 2 차원 배열의 동적 할당 */
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char **argv) {
  int i;
  int x, y;
  int **arr;  // 우리는 arr[x][y] 를 만들 것이다.

  printf("arr[x][y] 를 만들 것입니다.\n");
  scanf("%d %d", &x, &y);

  arr = (int **)malloc(sizeof(int *) * x);
  // int* 형의 원소를 x 개 가지는 1 차원 배열 생성

  for (i = 0; i < x; i++) {
    arr[i] = (int *)malloc(sizeof(int) * y);
  }

  printf("생성 완료! \n");

  for (i = 0; i < x; i++) {
    free(arr[i]);
  }
  free(arr);

  return 0;
}
```
- int ** arr;
  - arr의 형은 int** 형이므로 위와 같이 선언
- arr 배열의 각 원소들은 int* 형이므로 다른 int 배열을 가르키고 있음
  
```
for (i = 0; i < x; i++) {
  arr[i] = (int *)malloc(sizeof(int) * y);
}
```
- arr의 하나의 원소의 크기가 y인 배열을 가르키고 있는데, arr의 원소의 개수가 x개이므로 전체적으로 x * y 인 배열
- 그러나 이는 메모리에 연속적으로 있지 않기에 엄밀히 2차원 배열이라 하기는 힘듦
- 다른 2차원 배열과는 달리 함수의 인자로도 넘길 수 있음. arr은 단순히 int* 형 원소를 가지는 1차원 배열이기 때문에
- 그러나 이차원 배열처럼 arr[3][4], 이런 방식으로 접근할 수 있음
  
  
```
/* 2 차원 배열 동적 할당의 활용 */
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char **argv) {
  int i, j, input, sum = 0;
  int subject, students;
  int **arr;
  // 우리는 arr[subject][students] 배열을 만들 것이다.

  printf("과목 수 : ");
  scanf("%d", &subject);

  printf("학생의 수 : ");
  scanf("%d", &students);

  arr = (int **)malloc(sizeof(int *) * subject);

  for (i = 0; i < subject; i++) {
    arr[i] = (int *)malloc(sizeof(int) * students);
  }

  for (i = 0; i < subject; i++) {
    printf("과목 %d 점수 --------- \n", i);

    for (j = 0; j < students; j++) {
      printf("학생 %d 점수 입력 : ", j);
      scanf("%d", &input);

      arr[i][j] = input;
    }
  }

  for (i = 0; i < subject; i++) {
    sum = 0;
    for (j = 0; j < students; j++) {
      sum += arr[i][j];
    }
    printf("과목 %d 평균 점수 : %d \n", i, sum / students);
  }

  for (i = 0; i < subject; i++) {
    free(arr[i]);
  }

  free(arr);

  return 0;
}
```
